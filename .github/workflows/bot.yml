name: kraken-bot

on:
 schedule:
   - cron: "*/1 * * * *"   # run every 1 minutes
 workflow_dispatch:        # allow manual runs

jobs:
 run:
   runs-on: ubuntu-latest
   timeout-minutes: 10
   steps:
     - name: Checkout
       uses: actions/checkout@v4

     - name: Set up Python
       uses: actions/setup-python@v5
       with:
         python-version: "3.11"

     - name: Install dependencies
       run: pip install -r requirements.txt

     - name: Run bot
       env:
         LIVE: ${{ secrets.LIVE }}
         PAIRS: ${{ secrets.PAIRS }}
         USD_PER_TRADE: ${{ secrets.USD_PER_TRADE }}
         KRAKEN_API_KEY: ${{ secrets.KRAKEN_API_KEY }}
         KRAKEN_API_SECRET: ${{ secrets.KRAKEN_API_SECRET }}
       run: python main.py
